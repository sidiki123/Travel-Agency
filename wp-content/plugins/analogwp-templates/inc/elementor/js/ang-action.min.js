"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(e,t){t.fn.classList=function(){return this[0].className.split(/\s+/)};var n=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:elementor.config.kit_id;elementor.$previewContents.find("body").classList().filter(function(e){return e.startsWith("elementor-kit-")}).forEach(function(e){elementor.$previewContents.find("body").removeClass(e)}),elementor.$previewContents.find("body").addClass("elementor-kit-".concat(e))}function a(e){analog.setPanelTitle(e),i(elementor.config.kit_id=e),function(l){elementor.documents.request(l).then(function(e){elementor.documents.addDocumentByConfig(e),elementor.$previewContents.find("#elementor-post-".concat(e.id,"-css")).length||$e.run("panel/global/open")}).then(function(){for(var e=elementor.documents.get(l),t=e.config.settings.settings,n=e.config.settings.controls,o=0,i=Object.entries(t);o<i.length;o++){var a=_slicedToArray(i[o],2),r=a[0],s=a[1];n[r]&&"font"===n[r].type&&s&&elementor.helpers.enqueueFont(s)}})}(e)}elementor.once("preview:loaded",function(){if(elementor.channels.editor.on("analog:editKit",function(){return $e.run("panel/global/open")}),void 0!==elementor.config.initial_document.panel&&elementor.config.initial_document.panel.support_kit&&elementor.config.user.can_edit_kit){if("kit"===elementor.config.initial_document.type)return elementor.$previewContents.find("body").removeClass("elementor-kit-".concat(elementor.config.kit_id)).addClass("elementor-kit-".concat(elementor.config.document.id)),void function(){for(var e=elementor.settings.page.model.attributes,t=elementor.settings.page.model.controls,n=0,o=Object.entries(e);n<o.length;n++){var i=_slicedToArray(o[n],2),a=i[0],r=i[1];t[a]&&"font"===t[a].type&&r&&elementor.helpers.enqueueFont(r)}}();var e=elementor.documents.documents[elementor.config.initial_document.id].container,t=e.settings.attributes.ang_action_tokens,n=e.controls.ang_action_tokens.options;""!==t&&parseInt(t)in n||elementor.settings.page.model.setExternalChange("ang_action_tokens",AGWP.global_kit),elementor.settings.page.addChangeCallback("ang_action_tokens",a),!ANG_Action.globalKit||parseInt(elementor.settings.page.model.attributes.ang_action_tokens)in elementor.settings.page.model.controls.ang_action_tokens.options||elementor.settings.page.model.setExternalChange("ang_action_tokens",ANG_Action.globalKit);var o=elementor.settings.page.model.attributes.ang_action_tokens;void 0!==o&&(elementor.config.kit_id=o,i(),analog.setPanelTitle(o))}})};t(e).on("elementor:init",function(){new n})}(window,jQuery),jQuery(window).on("elementor:init",function(){var a=window.analog=window.analog||{};elementor.settings.page.model.attributes;function l(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)}a.style_kit_updated=!1,a.sk_modal_shown=!1,ANG_Action.skPanelsAllowed||jQuery("head").append('<style id="sk-panels-allowed">.elementor-panel [class*="elementor-control-ang_"], .elementor-panel [class*="elementor-control-description_ang_"] {display:none;}</style>'),a.setPanelTitle=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=elementor.documents.documents[elementor.config.initial_document.id].container;e||(e=t.settings.attributes.ang_action_tokens);var n=t.controls.ang_action_tokens.options[e];""!==n&&"undefined"!==n&&void 0!==n&&(elementor.getPanelView().getPages().kit_settings.title=elementor.translate("Theme Style")+" - "+n)};a.redirectToSection=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"settings";1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2];return $e.route("panel/page-settings/".concat(e)),elementor.getPanelView().getCurrentPageView().activateSection("ang_style_settings")._renderChildren(),!1},a.redirectToPanel=function(e){$e.run("panel/global/open").then(function(){elementor.getPanelView().setPage("kit_settings").content.currentView.activateSection(e).activateTab("style")})},a.switchKitSection=function(e){elementor.getPanelView().setPage("kit_settings").content.currentView.activateSection(e).activateTab("style")},a.resetStyles=function(){$e.run("document/elements/reset-settings",{container:elementor.documents.documents[elementor.config.kit_id].container,settings:null})};var t=elementor.modules.controls.BaseData,e=t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),elementor.helpers.compareVersions(ElementorConfig.version,"2.8.0","<")?this.settingsModel=e.elementSettingsModel:this.settingsModel=e.container.model,"update_token"===this.model.get("action")&&this.listenTo(this.settingsModel,"change",this.toggleControlVisibility)},toggleControlVisibility:function(){"update_token"===this.model.get("action")&&(this.$el.find("button").attr("disabled",!0),Object.keys(elementor.settings.page.model.changed).length&&this.$el.find("button").attr("disabled",!1))},ui:function(){var e=t.prototype.ui.apply(this,arguments);return _.extend(e,{actionButton:"button"}),e},events:function(){var e=t.prototype.events.apply(this,arguments);return e["click @ui.actionButton"]="onChangeEvent",e},actions:function(){return{update_token:"handleTokenUpdate"}},performAction:function(e){var t=this.actions();return this[t[e]]()},onChangeEvent:function(e){var t=e.currentTarget,n=jQuery(t).data("action");this.performAction(n)}});elementor.addControlView("ang_action",e),elementor.on("preview:loaded",function(){elementor.helpers.compareVersions(ElementorConfig.version,"2.7.6",">")&&jQuery("body").toggleClass("dark-mode","dark"===elementor.settings.editorPreferences.model.attributes.ui_theme)}),jQuery("#elementor-panel").on("change",'[data-setting="ui_theme"]',function(e){var t=e.target.value;jQuery("body").toggleClass("dark-mode","dark"===t)}),a.handleCSSReset=function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:a.resetStyles}).show()},a.handleSaveToken=function(){var i=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-save-token",headerMessage:ANG_Action.translate.saveToken,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:ANG_Action.translate.cancel,callback:function(){i.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.saveToken2,callback:function(e){var t=e.getElements("content").find("#ang_token_title").val();if(t){var n={},o=elementor.documents.documents[elementor.config.kit_id].container.settings.attributes;_.map(o,function(e,t){(function(e){return!(e.startsWith("ang_action")||e.startsWith("post")||e.startsWith("preview"))})(t)&&(n[t]=e)}),wp.apiFetch({url:ANG_Action.saveToken,method:"post",data:{id:elementor.config.kit_id,title:t,settings:JSON.stringify(n)}}).then(function(e){elementor.documents.documents[elementor.config.initial_document.id].container.controls.ang_action_tokens.options[e.id]=t,elementor.config.kit_id=e.id,i.destroy(),a.setPanelTitle(e.id),$e.run("document/save/discard"),$e.run("panel/global/close").then(function(){elementor.settings.page.model.setExternalChange("ang_action_tokens",e.id)}),elementor.notifications.showToast({message:e.message})}).catch(function(e){elementorCommon.dialogsManager.createWidget("alert",{headerMessage:e.code,message:e.message}).show()})}else elementor.notifications.showToast({message:"Please enter a title to save your Kit."})}})},onShow:function(){i.getElements("content").append('<input id="ang_token_title" type="text" value="" placeholder="'.concat(ANG_Action.translate.enterTitle,'" />'))}});i.getElements("message").append(i.addElement("content")),i.show(),jQuery(window).resize()},a.handleCSSExport=function(){var e=elementor.settings.page.getControlsCSS().elements.$stylesheetElement[0].textContent,t=elementor.settings.page.model.get("custom_css"),n=e.replace(t,""),s=cssbeautify(n,{indent:"  ",openbrace:"end-of-line",autosemicolon:!0}),o=function(e){var t=e.target.checked,n="body.elementor-kit-".concat(elementor.config.document.id),o="body.elementor-page",i=jQuery("#ang-export-css");if(t){var a=l(s,n+" ",o+" ");a=l(a=l(a,n+":",o+":"),n+",",o+","),jQuery(i).html(a)}else{var r=l(s,o+" ",n+" ");r=l(r=l(r,o+":",n+":"),o+",",n+","),jQuery(i).html(r)}},i=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-export-css",headerMessage:ANG_Action.translate.exportCSS,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:elementor.translate("cancel"),callback:function(){i.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.copyCSS,callback:function(){var e=i.getElements("content");jQuery(e.find("textarea")).select(),document.execCommand("copy")}})},onShow:function(){i.getElements("content").append('\n\t\t\t\t\t\t<textarea id="ang-export-css" rows="10">'.concat(s,'</textarea>\n\t\t\t\t\t\t<div style="text-align:left;">\n\t\t\t\t\t\t\t<input type="checkbox" id="ang-switch-selector" />\n\t\t\t\t\t\t\t<label for="ang-switch-selector">').concat(ANG_Action.translate.cssSelector,"</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t")),jQuery("#ang-switch-selector").bind("change",o)},onHide:function(){setTimeout(function(){i.destroy()},200)}});i.getElements("message").append(i.addElement("content")),i.show(),jQuery(window).resize()},elementor.channels.editor.on("analog:resetKit",a.handleCSSReset),elementor.channels.editor.on("analog:saveKit",a.handleSaveToken),elementor.channels.editor.on("analog:exportCSS",a.handleCSSExport)});